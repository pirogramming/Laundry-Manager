<!DOCTYPE html>
<html lang="ko">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„¸íƒ ë§¤ë‹ˆì € - ë©”ì¸</title>

    <!-- ì™¸ë¶€ CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    <link rel="stylesheet" href="{% static 'laundry_manager/main-style2.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <!-- (ì„ì‹œ) ì˜¤ëŠ˜ì˜ ìš´ì„¸ ëª¨ë‹¬ ì „ìš© ìŠ¤íƒ€ì¼: í•„ìš”ì‹œ main-style2.cssë¡œ ì´ë™ -->
    <style>
      .fortune-backdrop{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
        background:rgba(0,0,0,.35);z-index:9999}
      .fortune-modal{background:#fff;border-radius:16px;max-width:360px;width:92%;
        box-shadow:0 10px 30px rgba(0,0,0,.2);overflow:hidden}
      .fortune-header{display:flex;align-items:center;justify-content:space-between;
        padding:12px 16px;border-bottom:1px solid #eee}
      .fortune-body{padding:16px;line-height:1.6}
      .fortune-close{background:none;border:none;font-size:24px;cursor:pointer;line-height:1}
      /* ì ‘ê·¼ì„± ëŒ€ë¹„ í¬ì»¤ìŠ¤ */
      .fortune-close:focus{outline:2px solid #333; outline-offset:2px}
      /* ëª¨ì…˜ì€ ë‚˜ì¤‘ì— JS ë¶™ì¼ ë•Œ ì¼¤ ìˆ˜ ìˆìŒ */
    </style>
</head>
<body>
<div class="mobile-container">
    <header class="greeting-section">
        <div class="logo-and-title">
            <div class="logo-area">
                <img src="{% static 'stain_image/laundry-manager-logo.svg' %}" alt="ì„¸íƒ ë§¤ë‹ˆì € ë¡œê³ " class="laundry-logo">
            </div>
            <div class="title-group">
                {# í•„ìš” ì‹œ ì œëª©/ì„¤ëª… ë…¸ì¶œ #}
                {# <span class="logo-exp">ìƒí™œí˜• ì„¸íƒ ì •ë³´ ì¶”ì²œ í”Œë«í¼</span> #}
                {# <h2>ì„¸íƒë§¤ë‹ˆì €</h2> #}
            </div>
        </div>

        <div class="profile-and-greeting">
            {% comment %} <a href="{% url 'login' %}" class="profile-link" aria-label="í”„ë¡œí•„ / ë¡œê·¸ì¸">
                <img
                    src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxMSEhMT..."  <!-- ìƒëµ -->
                    alt="í”„ë¡œí•„ ì‚¬ì§„"
                    class="profile-pic">
            </a> {% endcomment %}
            <div class="greeting-text">
                <p>ì•ˆë…•í•˜ì„¸ìš”ğŸ‘‹</p>
                <h2>
                    {% if user.is_authenticated %}
                        <span class="username">{{ display_name }}</span>ë‹˜
                    {% else %}
                        <span class="username">ë°©ë¬¸ì</span>ë‹˜
                    {% endif %}
                </h2>
            </div>
        </div>
    </header>

    <main>
        <!-- CTA: ì„¸íƒ ì •ë³´ ì…ë ¥ (í•œ ë²ˆë§Œ ë…¸ì¶œ) -->
        <section class="cta-card">
            <div class="cta-icon-wrapper">
                <i class="fa-solid fa-shirt"></i>
            </div>
            <div class="cta-text">
                <h3 class="cta-title">ì„¸íƒ ì •ë³´ ì…ë ¥</h3>
                <p>ì„¸íƒ ë¼ë²¨ì„ ì¸ì‹í•´ ì •í™•í•œ ì„¸íƒ ë°©ë²•ì„ ì•Œë ¤ë“œë ¤ìš”!</p>
            </div>
            <a href="{% url 'laundry-upload' %}" class="cta-button" id="takePictureBtn">
                ì‚¬ì§„ ì°ê³  ì„¸íƒë²• ë°›ê¸°
                <i class="fa-solid fa-play" aria-hidden="true"></i>
            </a>
        </section>

        <!-- ì˜¤ëŠ˜ì˜ ì„¸íƒë²• -->
        <h3 class="main-title">
            <span>ì˜¤ëŠ˜ì˜ ì„¸íƒë²•</span>
            <a href="{% url 'dictionary' %}" class="carousel-more">
                ë”ë³´ê¸° <i class="fa-solid fa-arrow-right" aria-hidden="true"></i>
            </a>
        </h3>

        <section class="main-carousel-section">
            <div class="swiper main-swiper">
                <div class="swiper-wrapper">
                        <div class="swiper-slide" style="background-image:url(https://cdnweb01.wikitree.co.kr/webdata/editor/202311/07/img_20231107151039_0782a7df.webp)">
                            <a href="{% url 'dictionary_detail' item_title='í° ì˜·ì—ì„œ ì–¼ë£©ì„ ì œê±°í•˜ëŠ” ë°©ë²•'|urlencode %}">
                                <div class="slide-content">
                                    <h4>í° ì˜·ì—ì„œ ì–¼ë£©ì„ ì œê±°í•˜ëŠ” ë°©ë²•</h4>
                                    <p>ì–¼ë£© ë¬»ì€ í° ì˜·ì„ íš¨ê³¼ì ìœ¼ë¡œ ì„¸íƒí•˜ì„¸ìš”!</p>
                                </div>
                            </a>
                        </div>
                    <div class="swiper-slide" style="background-image:url(https://cdn.pixabay.com/photo/2015/10/06/13/53/bears-974462_1280.jpg)">
                        <a href="{% url 'dictionary_detail' item_title='ë‹ˆíŠ¸ ë³´ê´€ ë°©ë²•'|urlencode %}" class="info-grid-item">
                            <div class="slide-content">
                                <h4>ë‹ˆíŠ¸ ë³´ê´€ ë²•</h4>

                                <p>ì¤„ì–´ë“¤ ê±±ì • ì—†ì´ ê¹¨ë—í•˜ê²Œ ì„¸íƒí•˜ì„¸ìš”</p>
                            </div>
                        </a>
                    </div>

                    <div class="swiper-slide" style="background-image:url(https://pds.joongang.co.kr//news/component/htmlphoto_mmdata/201805/25/c8c555ac-09fe-4224-9231-316645f7aded.jpg)">
                        <a href="{% url 'dictionary_detail' item_title='ë©´ ì˜·ì˜ ì–¼ë£© ì œê±°ë²•'|urlencode %}" class="info-grid-item">
                            <div class="slide-content">
                                <h4>ë©´ ì˜·ì˜ ì–¼ë£© ì œê±°ë²•</h4>
                                <p>ê¹€ì¹«ìêµ­ë¶€í„° ì»¤í”¼ ì–¼ë£©ê¹Œì§€ ì™„ë²½ ì œê±°</p>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="swiper-pagination"></div>
            </div>
        </section>

        <!-- ê¸°ë¡ë³´ê¸° -->
        <section class="history-section">
            <h3>ê¸°ë¡ë³´ê¸°</h3>
            <div class="history-list">
                {% for record in records %}
                    <a href="{% url 'laundry_history_detail' record.pk %}" class="history-item">
                        <img src="{{ record.get_stain_image_url }}" alt="{{ record.stains }}" class="history-img">
                        <div class="history-details">
                            <h4>{{ record.materials }} / {{ record.stains }} ì œê±°</h4>
                            <p>{{ record.created_at|timesince }} ì „ ê²€ìƒ‰</p>
                        </div>
                        <i class="fa-solid fa-chevron-right" aria-hidden="true"></i>
                    </a>
                {% empty %}
                    <p>ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                {% endfor %}
            </div>
        </section>
    </main>

    <!-- í•˜ë‹¨ ë‚´ë¹„ê²Œì´ì…˜ -->
    <nav class="bottom-nav" aria-label="í•˜ë‹¨ ë‚´ë¹„ê²Œì´ì…˜">
        <a href="{% url 'main' %}" class="nav-item active">
            <i class="fa-solid fa-house" aria-hidden="true"></i>
            <span>ë©”ì¸ í™”ë©´</span>
        </a>
        <a href="{% url 'map' %}" class="nav-item">
            <i class="fa-solid fa-map-location-dot" aria-hidden="true"></i>
            <span>ì§€ë„</span>
        </a>
        <a href="{% url 'laundry-upload' %}" class="nav-item-main" aria-label="ì‚¬ì§„ ì°ê¸°">
            <i class="fa-solid fa-camera" aria-hidden="true"></i>
        </a>
        <a href="{% url 'dictionary' %}" class="nav-item">
            <i class="fa-solid fa-book-open" aria-hidden="true"></i>
            <span>ë°±ê³¼ì‚¬ì „</span>
        </a>
        <a href="{% url 'profile' %}" class="nav-item">
            <i class="fa-solid fa-gear" aria-hidden="true"></i>
            <span>ë”ë³´ê¸°</span>
        </a>
    </nav>
</div>

<!-- ì˜¤ëŠ˜ì˜ ìš´ì„¸ ëª¨ë‹¬ (JS ë¶™ê¸° ì „, ê¸°ë³¸ hidden) -->
    {% comment %} <div id="fortune-modal" class="fortune-backdrop" hidden>
    <div class="fortune-modal" role="dialog" aria-modal="true" aria-labelledby="fortune-title">
        <div class="fortune-header">
        <strong id="fortune-title">ì˜¤ëŠ˜ì˜ ìš´ì„¸</strong>
        <button id="fortune-close" class="fortune-close" type="button" aria-label="ë‹«ê¸°">&times;</button>

        </div>
        <div class="fortune-body">
        <p id="fortune-text">ë¡œë”© ëŒ€ê¸° ì¤‘â€¦</p>
        </div>
    </div>
    </div> {% endcomment %}

<!-- ìŠ¤í¬ë¦½íŠ¸ (ê¸°ì¡´ë§Œ ìœ ì§€, ìš´ì„¸ JSëŠ” ë³´ë¥˜) -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/motion@latest/dist/motion.js"></script>
<script type="module" src="{% static 'laundry_manager/main-script2.js' %}"></script>
<script>
  /* Swiperê°€ main-script2.jsì—ì„œ ì´ˆê¸°í™”ë˜ì§€ ì•ŠëŠ” ê²½ìš°ë¥¼ ëŒ€ë¹„í•œ ì•ˆì „ ì´ˆê¸°í™” */
  window.addEventListener('DOMContentLoaded', () => {
      if (typeof Swiper !== 'undefined') {
          new Swiper('.main-swiper', {
              pagination: { el: '.swiper-pagination', clickable: true },
              loop: true
          });
      }
  });
</script>
</body>
</html>
