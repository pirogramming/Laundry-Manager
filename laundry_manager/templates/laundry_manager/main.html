<!DOCTYPE html>
<html lang="ko">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>μ„Ένƒ λ§¤λ‹μ € - λ©”μΈ</title>

    <!-- μ™Έλ¶€ CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    <link rel="stylesheet" href="{% static 'laundry_manager/main-style2.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>
<div class="mobile-container">
    <header class="greeting-section">
        <div class="logo-and-title">
            <div class="logo-area">
                <img src="{% static 'stain_image/laundry-manager-logo.svg' %}" alt="μ„Ένƒ λ§¤λ‹μ € λ΅κ³ " class="laundry-logo">
            </div>
            <div class="title-group">
                {# ν•„μ” μ‹ μ λ©/μ„¤λ… λ…Έμ¶ #}
                {# <span class="logo-exp">μƒν™ν• μ„Ένƒ μ •λ³΄ μ¶”μ² ν”λ«νΌ</span> #}
                {# <h2>μ„Ένƒλ§¤λ‹μ €</h2> #}
            </div>
        </div>

        <div class="profile-and-greeting">
            <a href="{% url 'login' %}" class="profile-link" aria-label="ν”„λ΅ν•„ / λ΅κ·ΈμΈ">
                <img
                    src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxMSEhMT..."  <!-- μƒλµ -->
                    alt="ν”„λ΅ν•„ μ‚¬μ§„"
                    class="profile-pic">
            </a>
            <div class="greeting-text">
                <p>μ•λ…•ν•μ„Έμ”π‘‹</p>
                <h2>
                    {% if user.is_authenticated %}
                        <span class="username">{{ display_name }}</span>λ‹
                    {% else %}
                        <span class="username">λ°©λ¬Έμ</span>λ‹
                    {% endif %}
                </h2>
            </div>
        </div>
    </header>

    <main>
        <!-- CTA: μ„Ένƒ μ •λ³΄ μ…λ ¥ (ν• λ²λ§ λ…Έμ¶) -->
        <section class="cta-card">
            <div class="cta-icon-wrapper">
                <i class="fa-solid fa-shirt"></i>
            </div>
            <div class="cta-text">
                <h3 class="cta-title">μ„Ένƒ μ •λ³΄ μ…λ ¥</h3>
                <p>μ„Ένƒ λΌλ²¨μ„ μΈμ‹ν•΄ μ •ν™•ν• μ„Ένƒ λ°©λ²•μ„ μ•λ ¤λ“λ ¤μ”!</p>
            </div>
            <a href="{% url 'laundry-upload' %}" class="cta-button" id="takePictureBtn">
                μ‚¬μ§„ μ°κ³  μ„Ένƒλ²• λ°›κΈ°
                <i class="fa-solid fa-play" aria-hidden="true"></i>
            </a>
        </section>

        <!-- μ¤λμ μ„Ένƒλ²• -->
        <h3 class="main-title">
            <span>μ¤λμ μ„Ένƒλ²•</span>
            <a href="{% url 'dictionary' %}" class="carousel-more">
                λ”λ³΄κΈ° <i class="fa-solid fa-arrow-right" aria-hidden="true"></i>
            </a>
        </h3>

        <section class="main-carousel-section">
            <div class="swiper main-swiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" style="background-image:url(https://cdnweb01.wikitree.co.kr/webdata/editor/202311/07/img_20231107151039_0782a7df.webp)">
                        <a href="{% url 'dictionary_detail' item_title='ν° μ·μ—μ„ μ–Όλ£©μ„ μ κ±°ν•λ” λ°©λ²•'|urlencode %}" class="info-grid-item">
                            <div class="slide-content">
                                <h4>ν° μ·μ—μ„ μ–Όλ£©μ„ μ κ±°ν•λ” λ°©λ²•</h4>
                                <p>λ”λ¬μ›μ§„ ν° μ·μ„ μ„Ένƒν•μ„Έμ”!</p>
                            </div>
                        </a>
                    </div>

                    <div class="swiper-slide" style="background-image:url(https://cdn.pixabay.com/photo/2015/10/06/13/53/bears-974462_1280.jpg)">
                        <a href="{% url 'dictionary_detail' item_title='λ‹νΈ λ³΄κ΄€ λ°©λ²•'|urlencode %}" class="info-grid-item">
                            <div class="slide-content">
                                <h4>λ‹νΈ λ³΄κ΄€ λ°©λ²•</h4>
                                <p>μ¤„μ–΄λ“¤ κ±±μ • μ—†μ΄ κΉ¨λ—ν•κ² μ„Ένƒν•μ„Έμ”</p>
                            </div>
                        </a>
                    </div>

                    <div class="swiper-slide" style="background-image:url(https://pds.joongang.co.kr//news/component/htmlphoto_mmdata/201805/25/c8c555ac-09fe-4224-9231-316645f7aded.jpg)">
                        <a href="{% url 'dictionary_detail' item_title='λ©΄ μ·μ μ–Όλ£© μ κ±°λ²•'|urlencode %}" class="info-grid-item">
                            <div class="slide-content">
                                <h4>λ©΄ μ·μ μ–Όλ£© μ κ±°λ²•</h4>
                                <p>κΉ€μΉ«μκµ­λ¶€ν„° μ»¤ν”Ό μ–Όλ£©κΉμ§€ μ™„λ²½ μ κ±°</p>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="swiper-pagination"></div>
            </div>
        </section>

        <!-- κΈ°λ΅λ³΄κΈ° -->
        <section class="history-section">
            <h3>κΈ°λ΅λ³΄κΈ°</h3>
            <div class="history-list">
                {% for record in records %}
                    <a href="{% url 'laundry_history_detail' record.pk %}" class="history-item">
                        <img src="{{ record.get_stain_image_url }}" alt="{{ record.stains }}" class="history-img">
                        <div class="history-details">
                            <h4>{{ record.materials }} / {{ record.stains }} μ κ±°</h4>
                            <p>{{ record.created_at|timesince }} μ „ κ²€μƒ‰</p>
                        </div>
                        <i class="fa-solid fa-chevron-right" aria-hidden="true"></i>
                    </a>
                {% empty %}
                    <p>μ•„μ§ κΈ°λ΅μ΄ μ—†μµλ‹λ‹¤.</p>
                {% endfor %}
            </div>
        </section>
    </main>

    <!-- ν•λ‹¨ λ‚΄λΉ„κ²μ΄μ… -->
    <nav class="bottom-nav" aria-label="ν•λ‹¨ λ‚΄λΉ„κ²μ΄μ…">
        <a href="{% url 'main' %}" class="nav-item active">
            <i class="fa-solid fa-house" aria-hidden="true"></i>
            <span>λ©”μΈ ν™”λ©΄</span>
        </a>
        <a href="{% url 'map' %}" class="nav-item">
            <i class="fa-solid fa-map-location-dot" aria-hidden="true"></i>
            <span>μ§€λ„</span>
        </a>
        <a href="{% url 'laundry-upload' %}" class="nav-item-main" aria-label="μ‚¬μ§„ μ°κΈ°">
            <i class="fa-solid fa-camera" aria-hidden="true"></i>
        </a>
        <a href="{% url 'dictionary' %}" class="nav-item">
            <i class="fa-solid fa-book-open" aria-hidden="true"></i>
            <span>λ°±κ³Όμ‚¬μ „</span>
        </a>
        <a href="{% url 'profile' %}" class="nav-item">
            <i class="fa-solid fa-gear" aria-hidden="true"></i>
            <span>λ”λ³΄κΈ°</span>
        </a>
    </nav>
</div>

<!-- μ¤ν¬λ¦½νΈ -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/motion@latest/dist/motion.js"></script>
<script type="module" src="{% static 'laundry_manager/main-script2.js' %}"></script>
<script>
    // νΉμ‹ main-script2.jsμ— μ΄κΈ°ν™”κ°€ μ—†λ‹¤λ©΄ λ€λΉ„μ©
    window.addEventListener('DOMContentLoaded', () => {
        if (typeof Swiper !== 'undefined') {
            new Swiper('.main-swiper', {
                pagination: { el: '.swiper-pagination', clickable: true },
                loop: true
            });
        }
    });
</script>
</body>
</html>
