{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>세탁 기호 분류</title>
  <link rel="stylesheet" href="{% static 'laundry_manager/style.css' %}">
</head>
<body>
  <h1>세탁 기호 분류</h1>

  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">업로드 & 분류</button>
  </form>

  {% if rf_enabled == False %}
    <p style="color:#b00">⚠ RF_ENABLED=false 상태입니다. .env를 확인하세요.</p>
  {% endif %}

  {% if error %}
    <p style="color:#b00">오류: {{ error }}</p>
  {% endif %}

  {% if result %}
    <h2>분류 결과</h2>
    {% if result.ok %}
      <p><b>라벨</b>: {{ result.label }}</p>
      <p><b>신뢰도</b>: {% if result.confidence %}{{ result.confidence|floatformat:3 }}{% else %}-{% endif %}</p>
    {% else %}
      <p>분류에 실패했습니다. ({{ result.error }})</p>
    {% endif %}

    <details>
      <summary>원본 응답(JSON)</summary>
      <pre style="white-space:pre-wrap">{{ result.raw|safe }}</pre>
    </details>
  {% endif %}
</body>
</html>
